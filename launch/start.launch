<?xml version="1.0"?>

<launch>

    <arg name="launch_prefix" default="" />
    
    <arg name="ROBOT_REAL" default="$(optenv ROBOT_REAL false)" />

<!--<include file="$(find amigo_joint_interface_converter)/launch/start.launch"/>-->
	
	<rosparam file="$(find amigo_whole_body_controller)/parameters/parameters.yaml" command="load" ns="whole_body_controller"/>
	<rosparam file="$(find amigo_whole_body_controller)/parameters/joint_limit_avoidance.yaml" command="load" ns="whole_body_controller"/>
	<rosparam file="$(find amigo_whole_body_controller)/parameters/posture_control.yaml" command="load" ns="whole_body_controller"/>
	<rosparam file="$(find amigo_whole_body_controller)/parameters/admittance_control.yaml" command="load" ns="whole_body_controller"/>
	<rosparam file="$(find amigo_whole_body_controller)/parameters/component_description.yaml" command="load" ns="whole_body_controller"/>
	<rosparam file="$(find amigo_whole_body_controller)/parameters/chain_description.yaml" command="load" ns="whole_body_controller"/>
	<rosparam file="$(find amigo_whole_body_controller)/parameters/collision_model.yaml" command="load" ns="whole_body_controller"/>
	<rosparam file="$(find amigo_whole_body_controller)/parameters/collision_avoidance.yaml" command="load" ns="whole_body_controller"/>
	<rosparam file="$(find amigo_whole_body_controller)/parameters/joint_trajectory_action.yaml" command="load" ns="whole_body_controller"/>
	
	<node pkg="amigo_whole_body_controller" type="whole_body_controller" name="whole_body_controller" respawn="false" output="screen"> <!-- launch-prefix="${arg launch_prefix}"/> -->
		<param name="omit_admittance" value="$(arg ROBOT_REAL)"/> <!--If ROBOT_REAL is true, admittance controller is omitted since this is implemented in Orocos-->
	</node>

	<!-- Node that filters the arms out of the depth image -->
    <node pkg="depth_map_self_filter" type="self_filter" name="depth_map_self_filter">
        <!-- <remap from="/camera_info" to="/amigo/top_kinect/rgb/camera_info" />
        <remap from="/depth_image" to="/amigo/top_kinect/depth_registered/image" />-->
    </node>
    
</launch>


